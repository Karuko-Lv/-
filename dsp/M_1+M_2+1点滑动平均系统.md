“$M_1+M_2+1$点滑动平均系统”是一个非常通用和灵活的**数字滤波器**。

我们教材中提到的标准**$M$点滑动平均系统**，实际上是这种通用形式的一个**特例**。

我们先来理解这个通用形式代表什么。

### 1. $M_1+M_2+1$点滑动平均系统代表什么？

它代表一个“**滑动窗口**”，这个窗口的总宽度是 $M = M_1+M_2+1$ 个样点。

这个系统的工作就是计算这个窗口内所有样点的算术平均值。

这个 $M_1+M_2+1$ 的写法，通常用来描述一个**非因果（Non-causal）或双边（Two-sided）**的滤波器窗口：

- **$1$** 代表 **当前** 时刻 $k$ 的样点。
    
- **$M_1$** 代表窗口中包含的 **未来** $M_1$ 个样点（$k+1, \dots, k+M_1$）。
    
- **$M_2$** 代表窗口中包含的 **过去** $M_2$ 个样点（$k-1, \dots, k-M_2$）。
    

### 2. 它的输入输出关系是什么？

这个系统的输入输出关系（即差分方程）是：

$$y[k] = \frac{1}{M_1+M_2+1} \sum_{n=-M_1}^{M_2} x[k-n]$$

我们来把这个求和 $\sum_{n=-M_1}^{M_2}$ 展开看看：

- 当 $n = -M_1$ 时 $\implies x[k - (-M_1)] = x[k+M_1]$ (未来的点)
    
- ...
    
- 当 $n = 0$ 时 $\implies x[k-0] = x[k]$ (现在的点)
    
- ...
    
- 当 $n = M_2$ 时 $\implies x[k-M_2]$ (过去的点)
    

这个公式计算了从“未来 $M_1$”到“过去 $M_2$”的总共 $M_1+M_2+1$ 个点的平均值。

### 3. 为什么？（它和教材的关系）

你可能会问：为什么教材上的公式 2222 不长这样？

- 教材中的标准 $M$ 点滑动平均
    
    教材中定义的 $M$ 点滑动平均系统是因果（Causal）的 333。因果系统意味着输出 $y[k]$ 不能依赖于未来的输入（如 $x[k+1]$）。
    
    - 在我们的通用公式中，要实现“因果”，就必须设置 **$M_1 = 0$**。
        
    - 这时，总点数 $M = 0 + M_2 + 1$，所以 $M_2 = M-1$。
        
    - 把 $M_1=0$ 和 $M_2=M-1$ 代入通用公式：
        
        $$y[k] = \frac{1}{0+(M-1)+1} \sum_{n=-0}^{M-1} x[k-n] = \frac{1}{M} \sum_{n=0}^{M-1} x[k-n]$$
        
    - 你看，这**正是教材中的标准公式** 4444。
        
- **为什么要用 $M_1+M_2+1$ 这种形式？**
    
    - **非因果滤波（$M_1 > 0$）：** 在**离线处理**中（比如处理一段已经录好的音频），我们“知道”未来的样本。使用一个**对称**的窗口（即 $M_1 = M_2$）来求平均，可以得到更平滑的结果，而且**不会产生相位失真**（即信号延迟）。
        
    - **因果滤波（$M_1 = 0$）：** 在**实时处理**中（比如打电话），我们“不知道”未来的样本，所以必须使用因果系统。
        

总结一下：

$M_1+M_2+1$ 点滑动平均系统是一个更广义的平均滤波器。它的核心原理就是通过**求平均**来**平滑信号、抑制噪声** 5。通过设置 $M_1$ 和 $M_2$ 的值，你可以决定这个滤波器是“因果的”（只看过去）还是“非因果的”（也看未来）。